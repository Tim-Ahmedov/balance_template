Создание микросервиса баланса пользователей
Приложение хранит в себе идентификаторы пользователей и их баланс
Взаимодействие с приложением осуществляется исключительно с помощью брокера очередей.

Микросервис может выполнить одну из операций со счетом пользователяпо требованию внешней
системы(общение между микросервисами через очередь сообщений, после проведения любой из операций генерируется событие):

Списание
Зачисление
Перевод от пользователя к пользователю

Блокирование споследующим списанием или разблокированием

Заблокированные средства недоступны для использования

Блокировка означает что некая операция находится на авторизации и ждет какого-то внешнего подтверждения, ее можно впоследствии подтвердить или отклонить

Код воркеров должен безопасно выполняться параллельно в разных процессах

Воркеры могут запускаться одновременно в любом числе экземпляров и выполняться произвольное время

Все операции должны обрабатываться корректно, без двойных списаний